<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>简易捏脸演示</title>
  <style>
    body {
      font-family: "Microsoft YaHei", sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0;
      padding: 0;
      background: #f8f8f8;
    }
    h1 {
      font-size: 1.4em;
      margin: 0.5em;
    }
    .canvas-container {
      position: relative;
      width: 90vw;
      max-width: 800px;
      aspect-ratio: 1 / 1;
      background: #fff;
      border: 2px solid #ddd;
      border-radius: 10px;
      overflow: hidden;
    }
    .layer {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      pointer-events: none;
    }
    .controls {
      display: flex;
      overflow-x: auto;
      margin-top: 10px;
      width: 100%;
      justify-content: center;
      flex-wrap: wrap;
      gap: 6px;
    }
    .controls button {
      padding: 8px 12px;
      border: 1px solid #aaa;
      border-radius: 8px;
      background: white;
      font-size: 14px;
    }
    .controls button.active {
      background: #ffd66b;
      border-color: #ffb800;
    }
    .options {
      display: flex;
      justify-content: center;
      gap: 8px;
      flex-wrap: wrap;
      margin-top: 8px;
    }
    .options img {
      width: 60px;
      height: 60px;
      border-radius: 8px;
      border: 2px solid transparent;
      cursor: pointer;
    }
    .options img.selected {
      border-color: #ffb800;
    }
  </style>
</head>
<body>
  <h1>捏脸演示</h1>
  
  <div class="canvas-container" id="canvas">
    <img id="layer-hair-back" class="layer">
    <img id="layer-face" class="layer">
    <img id="layer-hair-front" class="layer">
    <img id="layer-sideburn" class="layer">
    <img id="layer-eyebrow" class="layer">
    <img id="layer-eye" class="layer">
    <img id="layer-mouth" class="layer">
    <img id="layer-decoration" class="layer">
  </div>

  <div class="controls" id="category-buttons"></div>
  <div class="options" id="option-list"></div>

  <script>
    const categories = [
      { key: "hair-back", name: "后发" },
      { key: "face", name: "脸" },
      { key: "hair-front", name: "前发" },
      { key: "sideburn", name: "鬓角" },
      { key: "eyebrow", name: "眉毛" },
      { key: "eye", name: "眼睛" },
      { key: "mouth", name: "嘴巴" },
      { key: "decoration", name: "装饰" },
    ];

    const sampleImages = [
      "https://placehold.co/800x800/ffaaaa/ffffff?text=A",
      "https://placehold.co/800x800/aaffaa/ffffff?text=B",
      "https://placehold.co/800x800/aaaaff/ffffff?text=C"
    ];

    const categoryButtons = document.getElementById("category-buttons");
    const optionList = document.getElementById("option-list");
    let currentCategory = categories[0].key;
    const selections = {};

    // 初始化分类按钮
    categories.forEach(cat => {
      const btn = document.createElement("button");
      btn.textContent = cat.name;
      if (cat.key === currentCategory) btn.classList.add("active");
      btn.onclick = () => {
        document.querySelectorAll(".controls button").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        currentCategory = cat.key;
        renderOptions();
      };
      categoryButtons.appendChild(btn);
    });

    // 渲染当前分类选项
    function renderOptions() {
      optionList.innerHTML = "";
      sampleImages.forEach((src, i) => {
        const img = document.createElement("img");
        img.src = src;
        if (selections[currentCategory] === src) img.classList.add("selected");
        img.onclick = () => {
          selections[currentCategory] = src;
          document.getElementById("layer-" + currentCategory).src = src;
          renderOptions();
        };
        optionList.appendChild(img);
      });
    }

    renderOptions();
  </script>
</body>
</html>
